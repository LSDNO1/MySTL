# SGI分配器

## 一级和二级分配器的区别

SGI（Silicon Graphics Inc.）STL（Standard Template Library）实现中的一级配置器和二级配置器是为了解决内存分配效率和灵活性的问题而引入的。

一级配置器是直接使用 C++ 中的 `new` 和 `delete` 运算符进行内存的分配和释放。由于 `new` 和 `delete` 运算符在内存分配时会调用系统的 `malloc` 和 `free` 函数，因此一级配置器的内存分配效率相对较低。但是，**由于一级配置器直接使用系统分配的内存，因此可以处理任何大小的内存块**。

**二级配置器是为了提高内存分配效率而引入的。它使用了一个内存池来管理内存块**，避免了频繁调用系统的 `malloc` 和 `free` 函数。**在内存池中，二级配置器会维护一个链表，将内存块按照大小分成不同的链表**。当需要分配内存时，二级配置器会先在对应大小的链表中查找是否有可用的内存块，如果没有则会向系统申请一块较大的内存块，并将其切分成多个小块，然后将其中一个返回给用户。当用户释放内存时，二级配置器会将其加入到对应大小的链表中，以备后续使用。

总的来说，**一级配置器具有灵活性，可以处理任意大小的内存块，但效率相对较低**；而**二级配置器虽然效率更高，但只能处理固定大小的内存块，有一定的内存浪费**。在实际使用中，STL 会根据需要动态地选择一级配置器或二级配置器，以平衡内存分配效率和灵活性的需求。

## SGI分配器接口设计

给一级和二级分配器统一一个接口，以后调用只调用这个简单统一接口

```C++
template<class T,class Alloc>
class simple_alloc
{
	......
};

//举例调用
template<class T,class Alloc=alloc>//缺省构造，默认调用alloc
class vector
{
	typedef simple_alloc<int,Alloc> date_allocater;
};
```

